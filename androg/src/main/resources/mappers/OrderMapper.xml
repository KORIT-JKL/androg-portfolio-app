<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.korit.androg.androg.repository.OrderRepository">
	<resultMap type="com.korit.androg.androg.entity.Order" id="orderMap">
		<id property="orderId" column="order_id"/>
		<result property="userId" column="user_id"/>
		<result property="productId" column="product_id"/>
		<result property="sizeName" column="size_name"/>
		<result property="countNumber" column="count_number"/>
		<association property="Products" resultMap="productsMap"></association>
	</resultMap>

	<resultMap type="com.korit.androg.androg.entity.Products" id="productsMap">
		<id property="productId" column="product_id"/>
		<result property="productName" column="product_name"/>
		<result property="productPrice" column="product_price"/>
		<result property="productImg" column="product_img"/>
		<result property="sizeS" column="size_s"/>
		<result property="sizeM" column="size_m"/>
		<result property="sizeL" column="size_l"/>
		<result property="sizeXL" column="size_xl"/>
		<result property="sizeXXL" column="size_xxl"/>
		<association property="color" resultMap="colorMap"></association>
	</resultMap>
	
	<resultMap type="com.korit.androg.androg.entity.Color" id="colorMap">
		<id property="colorId" column="color_id"/>
		<result property="colorName" column="color_name"/>
	</resultMap>

	
	<select id="getBuyingProducts" parameterType="Integer" resultMap="OrderMap">
		select 
			pt.product_name
			pt.product_price
			pt.product_img
			ot.size_name
			ot.count_number
			ct.color_name 
		from 
			order_tb ot
			left outer join product_tb pt on(pt.product_id = ot.product_id)
			left outer join color_tb ct on(ct.color_id = pt.color_id)
		where
			ot.user_id = #{userId}
	
	</select>
</mapper>